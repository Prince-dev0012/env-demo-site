<!DOCTYPE html>
<html>
<head>

<title>ENV JSONP Final</title>

<meta name="viewport"
      content="width=device-width, initial-scale=1.0">

<style>
body{
  background:black;
  color:lime;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
</style>

</head>
<body>

<div id="msg">Loading ENV...</div>

<!-- 1️⃣ DEFINE CALLBACK FIRST -->
<script>

function loadENV(env){

  document.getElementById("msg")
    .innerText =
    env.TEST_MESSAGE || "No message";

}

</script>

<!-- 2️⃣ LOAD SHA256 -->
<script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>

<!-- 3️⃣ LOAD JSONP AFTER SHA256 -->
<script>

window.addEventListener("load",function(){

  const repo="testing-env";
  const key ="fdf9119bf119a445";
  const salt="my-super-salt-789";

  const sig=sha256(repo+key+salt);

  const script=document.createElement("script");

  script.src=
  "https://myenv.my-style.in/api.php"+
  "?repo="+repo+
  "&key="+key+
  "&sig="+sig+
  "&callback=loadENV";

  document.body.appendChild(script);

});

</script>

</body>
</html>
