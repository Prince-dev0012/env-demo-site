<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ENV API Test</title>

<style>
body{
  margin:0;
  background:black;
  color:lime;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  text-align:center;
}

.box{
  border:2px solid lime;
  padding:30px;
  border-radius:12px;
  box-shadow:0 0 20px lime;
  max-width:400px;
}

h2{
  margin-bottom:20px;
}

.status{
  font-size:13px;
  opacity:0.7;
  margin-top:15px;
}
</style>

</head>
<body>

<div class="box">

<h2>ENV Loader</h2>

<div id="message">
Loading ENV...
</div>

<div class="status" id="status">
Preparing request...
</div>

</div>

<!-- ============================= -->
<!-- 1️⃣ GLOBAL CALLBACK FUNCTION  -->
<!-- ============================= -->

<script>

function loadENV(data){

  const msg=document.getElementById("message");
  const status=document.getElementById("status");

  if(!data){
    msg.innerText="No data received";
    return;
  }

  if(data.error){
    msg.innerText=data.error;
    status.innerText="API returned error";
    return;
  }

  msg.innerText=data.TEST_MESSAGE || "ENV loaded";
  status.innerText="ENV Loaded Successfully";

}

</script>

<!-- ============================= -->
<!-- 2️⃣ SHA256 LIBRARY            -->
<!-- ============================= -->

<script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>

<!-- ============================= -->
<!-- 3️⃣ JSONP LOADER              -->
<!-- ============================= -->

<script>

window.addEventListener("load",function(){

  const repo="testing-env";
  const key ="fdf9119bf119a445";
  const salt="my-super-salt-789";

  /* Generate signature */

  const signature=sha256(repo+key+salt);

  document.getElementById("status")
    .innerText="Signature generated";

  /* Build API URL */

  const apiURL=
  "https://myenv.my-style.in/api.php"+
  "?repo="+repo+
  "&key="+key+
  "&sig="+signature+
  "&callback=loadENV";

  /* Create JSONP script */

  const script=document.createElement("script");

  script.src=apiURL;

  script.onerror=function(){
    document.getElementById("message")
      .innerText="Failed to load API script";
  };

  document.body.appendChild(script);

});

</script>

</body>
</html>
