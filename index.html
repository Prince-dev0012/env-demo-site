<!DOCTYPE html>
<html>
<head>

  <title>ENV Live Demo</title>

  <meta name="viewport"
        content="width=device-width, initial-scale=1.0">

  <!-- SHA256 LIBRARY -->
  <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/src/sha256.min.js"></script>

  <style>

    body{
      background:#000;
      color:#0f0;
      font-family:Arial;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      text-align:center;
    }

    .box{
      border:2px solid #0f0;
      padding:30px;
      border-radius:12px;
      box-shadow:0 0 20px #0f0;
      max-width:400px;
    }

    h1{
      margin-bottom:15px;
    }

    .status{
      font-size:13px;
      opacity:0.7;
      margin-top:10px;
    }

  </style>

</head>
<body>

<div class="box">

  <h1>ENV API Test</h1>

  <div id="message">
    Loading ENV...
  </div>

  <div class="status" id="status"></div>

</div>

<script>

/* ============================= */
/* CONFIG (ALREADY FILLED)       */
/* ============================= */

const repo = "testing-env";

const key  = "fdf9119bf119a445";

/* CHANGE ONLY IF SALT DIFFERENT */
const salt = "my-super-salt-789";

/* ============================= */
/* GENERATE HASH                 */
/* ============================= */

const signature =
  sha256(repo + key + salt);

/* ============================= */
/* BUILD API URL                 */
/* ============================= */

const apiURL =
  "https://myenv.my-style.in/api.php" +
  "?repo=" + repo +
  "&key=" + key +
  "&sig=" + signature;

/* ============================= */
/* FETCH ENV                     */
/* ============================= */

fetch(apiURL)

.then(res => res.json())

.then(env => {

  console.log("ENV DATA:", env);

  if(env.error){

    document.getElementById("message")
      .innerText =
      "API Error: " + env.error;

    document.getElementById("status")
      .innerText =
      "Check key / salt / repo";

    return;
  }

  /* USE ENV DATA */

  document.getElementById("message")
    .innerText =
    env.TEST_MESSAGE ||
    "ENV loaded but no TEST_MESSAGE";

  document.getElementById("status")
    .innerText =
    "ENV Loaded Successfully";

})

.catch(err => {

  document.getElementById("message")
    .innerText =
    "Failed to connect API";

  console.error(err);

});

</script>

</body>
</html>
